{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "definitions": {
    "ruleBase": {
      "x-doc-order": 1,
      "title": "RuleBase",
      "description": "ルールの共通フィールド",
      "type": "object",
      "properties": {
        "label": {
          "x-property-order": 11,
          "description": "show で表示するラベル",
          "type": "string"
        },
        "message": {
          "x-property-order": 12,
          "description": "validation で違反しているときに表示するメッセージ",
          "type": "string"
        },
        "match": {
          "x-property-order": 13,
          "description": "対象とするファイルの条件 (複数指定時は and で結合)",
          "x-doc-description": "show と validation で対象とするファイルの条件<br>複数指定時は and で結合",
          "type": "array",
          "items": {
            "$ref": "#/definitions/matchItem"
          }
        }
      }
    },
    "matchItem": {
      "x-doc-order": 2,
      "title": "MatchItem",
      "description": "ファイルマッチ条件の定義",
      "type": "object",
      "additionalProperties": false,
      "required": [
        "pattern",
        "keywords"
      ],
      "properties": {
        "pattern": {
          "x-property-order": 0,
          "description": "マッチパターンの種類",
          "$ref": "#/definitions/matchPattern"
        },
        "keywords": {
          "x-property-order": 1,
          "description": "マッチ対象のキーワード",
          "type": "array",
          "items": {
            "type": "string"
          }
        },
        "cond": {
          "x-property-order": 2,
          "description": "省略時は and",
          "$ref": "#/definitions/matchCond"
        }
      }
    },
    "matchPattern": {
      "x-doc-order": 3,
      "title": "MatchPattern",
      "description": "マッチパターンの種類",
      "type": "string",
      "oneOf": [
        {
          "const": "file_starts_with",
          "description": "ファイル名が指定文字列で始まる"
        },
        {
          "const": "file_ends_with",
          "description": "ファイル名が指定文字列で終わる"
        },
        {
          "const": "path_contains",
          "description": "パスに指定文字列が含まれる"
        },
        {
          "const": "file_not_starts_with",
          "description": "ファイル名が指定文字列で始まらない"
        },
        {
          "const": "file_not_ends_with",
          "description": "ファイル名が指定文字列で終わらない"
        },
        {
          "const": "path_not_contains",
          "description": "パスに指定文字列が含まれない"
        }
      ]
    },
    "matchCond": {
      "x-doc-order": 4,
      "title": "MatchCond",
      "description": "keywords の結合条件",
      "type": "string",
      "default": "and",
      "oneOf": [
        {
          "const": "and",
          "description": "すべての keyword に一致"
        },
        {
          "const": "or",
          "description": "いずれかの keyword に一致"
        }
      ]
    },
    "visibility": {
      "x-doc-order": 5,
      "title": "Visibility",
      "description": "Doc コメントを強制する対象の可視性",
      "type": "string",
      "oneOf": [
        {
          "x-property-order": 0,
          "const": "public",
          "description": "その言語における public のコードのみ検証"
        },
        {
          "x-property-order": 1,
          "const": "all",
          "description": "すべての可視性を検証"
        }
      ]
    },
    "testRequireLevel": {
      "x-doc-order": 6,
      "title": "TestRequireLevel",
      "description": "テスト存在検証レベル",
      "type": "string",
      "oneOf": [
        {
          "const": "exists",
          "description": "テストが存在すること"
        },
        {
          "const": "all_public",
          "description": "全 public メソッド/関数がテストで呼ばれること"
        }
      ]
    },
    "externalFileTestConfig": {
      "x-doc-order": 7,
      "title": "ExternalFileTestConfig",
      "description": "外部ファイルテスト存在検証設定 (PHPUnit, Kotest)",
      "type": "object",
      "additionalProperties": false,
      "properties": {
        "test_directory": {
          "x-property-order": 0,
          "description": "テストディレクトリのパス",
          "type": "string"
        },
        "test_file_suffix": {
          "x-property-order": 1,
          "description": "テストファイル名のサフィックス",
          "type": "string",
          "default": "Test"
        },
        "require": {
          "x-property-order": 2,
          "description": "検証レベル",
          "$ref": "#/definitions/testRequireLevel",
          "default": "exists"
        }
      }
    },
    "sameFileTestConfig": {
      "x-doc-order": 8,
      "title": "SameFileTestConfig",
      "description": "同一ファイルテスト存在検証設定 (Rust unit test)",
      "type": "object",
      "additionalProperties": false,
      "properties": {
        "require": {
          "x-property-order": 0,
          "description": "検証レベル",
          "$ref": "#/definitions/testRequireLevel",
          "default": "exists"
        }
      }
    }
  }
}
